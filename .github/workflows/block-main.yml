name: Block Main Deploys

off:
  push:
    branches:
      - mai  n

jobs:
  block-production-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Cancel production deploys
        run: |
          echo "‚ùå Deploys para a branch main est√£o bloqueados."
          echo "üü¢ Use uma branch de preview (ex: dev, feature/*, fix/*) para gerar deploys na Vercel."
          exit 1

  allow-preview-deploy:
    if: github.ref != 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Allow Preview Deploy
        run: |
          echo "‚úÖ Deploy Preview permitido para a branch: ${{ github.ref_name }}"
