name: "ğŸ”’ Prevent Auto-Fix from Adding \"use client\""

on:
  push:
    branches: [ "**" ]

jobs:
  protect-layout:
    runs-on: ubuntu-latest
    steps:
      - name: "ğŸ§© Check for forbidden directive"
        run: |
          if grep -R '"use client"' src/app/layout.tsx; then
            echo "âŒ ERROR: 'use client' directive detected in layout.tsx"
            echo "This file must remain a Server Component. Build aborted."
            exit 1
          fi
          echo "âœ… No forbidden directives found."
